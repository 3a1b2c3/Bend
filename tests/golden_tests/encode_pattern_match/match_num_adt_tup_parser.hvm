// Testing various forms of pattern matching
data Result = (Ok val) | (Err err)

Parse state (String.cons 40 xs) = (Ok (40, xs, state))
Parse state (String.cons 41 xs) = (Ok (41, xs, state))
Parse state (String.cons 10 xs) = (Ok (0, xs, state))
Parse state xs = (Err (xs, state))

main =
  let str = (String.cons 40 (String.cons 50 String.nil));
  let state = *;
  match (Parse state str) {
    (Ok (val, xs, state)): (val, (Parse state xs))
    err: err
  }